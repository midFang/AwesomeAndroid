## 视频编解码流程

![](https://raw.githubusercontent.com/midFang/imgSource/main/20240513220523.png)

### 几个问题

- 为什么需要编解码
  - 编码是因为视频数据在传输过程中比较大，编码就是压缩数据，解码就是将压缩的数据进行解压缩，变成硬件可以处理的数据
- 为什么需要解封装，数据进行分离
  - 为了数据可以显示器进行显示，播放声音等
  - 数据的分离，可以对音视频的同步进行处理，精准的控制视频和音频的时间
  - 可以针对某几帧画面进行处理，比如美颜

## Yuv 数据

- YUV 数据视频帧数据代表什么
  - Y 亮度，黑白电视 （早期的黑白电视就只 Y 分量，后续为了引入彩色电视，才有了 U，V 分量）
  - U 色度
  - V 饱和度

- YUV440，YUV420，YUV444 是什么
  -  YUV 420：在YUV420格式中，每四个Y分量共用一组UV分量（即色度分量被降采样）。具体来说，每两行的每两个Y分量共用一个U和一个V分量。这种格式的数据量是原始YUV444数据量的一半，因此广泛用于需要压缩的应用场景
  - YUV422：在YUV422格式中，每两个Y分量共用一组UV分量，这种格式提供了比YUV420更好的色彩表现，但数据量也相对更大。YUV422常用于专业视频编辑和广播领域，因为它在压缩过程中色彩损失较少
  - YUV444：这种格式中，每个Y分量都有对应的U和V分量，即没有色度降采样。YUV444提供最高质量的颜色表现，但相应的数据量也是最大的。这种格式适用于高质量图像处理，如图形设计和专业级视频制作

- 为什么 YUV 分量的比例可以有不同
  - YUV444 : Y：U：V 比例 1:1:1，YUV420 比例 2:1:0  ， 是因为人眼对亮度比较敏感，对色度没这么敏感，所以在 UV 分量上降低一点质量也看不出来，反而可以压缩数据量，也更加利于数据传输和存储

## H264 编解码码的思想

- H264编解码技术是一种高效的视频压缩标准，它的核心思想是最大限度地利用视频数据中的时间和空间冗余性。**认为视频帧之间往往存在大量相似的数据**，H264通过以下几种技术手段来充分利用这些特性，以达到压缩数据的目的：
  - **熵编码**：这是一种利用视频数据中元素出现概率不均匀的特性来进行压缩的技术。熵编码通过赋予常见模式较短的代码，而不常见的模式则赋予较长的代码，从而实现数据的有效压缩。
  - **帧内预测**：这种技术是在单个帧内部寻找数据的重复性。通过预测像素块的值而不是直接编码所有的像素值，可以显著减少需要传输的数据量。
  - **帧间预测**：帧间预测利用了视频序列中时间上的冗余性。它通过参考其他帧（如前一帧或后一帧）中的数据来预测当前帧的内容，只对差异部分进行编码。
  - **环形滤波**：这是一种在视频解码过程中用来改善图像质量的技术，主要用于减少压缩带来的块效应和其他编码噪声。

